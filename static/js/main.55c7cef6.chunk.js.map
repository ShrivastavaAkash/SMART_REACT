{"version":3,"sources":["components/Launcher.js","FhirClientContext.js","components/FhirClientProvider.js","components/Chart.js","components/Patient.js","components/Home.js","index.js","components/App.js"],"names":["Launcher","SMART","authorize","clientId","scope","redirectUri","iss","React","Component","context","client","setClient","FhirClientContext","createContext","FhirClientProvider","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","error","setState","_this2","react_default","a","createElement","message","Provider","value","Consumer","_ref","children","ready","then","catch","Chart","q","URLSearchParams","set","patient","id","request","concat","pageLimit","flat","bp","bpMap","systolic","diastolic","forEach","o","component","c","code","getPath","push","x","Date","effectiveDateTime","y","valueQuantity","sort","b","renderChart","chart","ChartJS","type","data","datasets","label","borderWidth","borderColor","fill","cubicInterpolationMode","options","responsive","scales","yAxes","offset","ticks","beginAtZero","min","max","stepSize","xAxes","title","text","display","fontSize","destroy","loadData","width","height","PatientName","_ref$name","name","entry","find","nameRecord","use","given","join","family","PatientBanner","gender","birthDate","contextType","Patient","loading","_loader","read","_this$state","Page","FhirClientProvider_FhirClientProvider","Patient_Patient","Chart_Chart","ReactDOM","render","react_router_dom","react_router","path","Home","exact","document","getElementById"],"mappings":"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","file":"static/js/main.55c7cef6.chunk.js","sourcesContent":["import React from \"react\";\nimport { oauth2 as SMART } from \"fhirclient\";\n\n/**\n * Typically the launch page is an empty page with a `SMART.authorize`\n * call in it.\n *\n * This example demonstrates that the call to authorize can be postponed\n * and called manually. In this case we use ReactRouter which will match\n * the `/launch` path and render our component. Then, after our page is\n * rendered we start the auth flow.\n */\nexport default class Launcher extends React.Component {\n    /**\n     * This is configured to make a Standalone Launch, just in case it\n     * is loaded directly. An EHR can still launch it by passing `iss`\n     * and `launch` url parameters\n     */\n    componentDidMount() {\n        SMART.authorize({\n            clientId: \"77c52008-3b4c-419d-9c00-49c787ab6562\",\n            scope: \"patient/Patient.read patient launch\",\n            redirectUri: \"./app\",\n            iss: \"https://fhir-ehr.sandboxcerner.com/r4/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca\"\n        });\n    }\n    /**\n     * Could also return `null` for empty page\n     */\n    render() {\n        return \"Launching...\";\n    }\n}\n","import React from \"react\";\n\nconst context = {\n    client: null,\n    setClient: function(client) {\n        context.client = client;\n    }\n};\n\nexport const FhirClientContext = React.createContext(context);\n","import React from \"react\";\nimport { oauth2 as SMART } from \"fhirclient\";\nimport { FhirClientContext } from \"../FhirClientContext\";\n\nexport default class FhirClientProvider extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            client: null,\n            error: null\n        };\n        this.setClient = client => this.setState({ client });\n    }\n\n    render() {\n        if (this.state.error) {\n            return <pre>{this.state.error.message}</pre>;\n        }\n        return (\n            <FhirClientContext.Provider\n                value={{\n                    client: this.state.client,\n                    setClient: this.setClient\n                }}\n            >\n                <FhirClientContext.Consumer>\n                    {({ client }) => {\n                        if (!client) {\n                            SMART.ready()\n                                .then(client => this.setState({ client }))\n                                .catch(error => this.setState({ error }));\n                            return null;\n                        }\n                        return this.props.children;\n                    }}\n                </FhirClientContext.Consumer>\n            </FhirClientContext.Provider>\n        );\n    }\n}\n","import React from \"react\";\nimport ChartJS from \"chart.js\";\nimport { FhirClientContext } from \"../FhirClientContext\";\n\nexport default class Chart extends React.Component {\n    static contextType = FhirClientContext;\n    loadData() {\n        const client = this.context.client;\n        const q = new URLSearchParams();\n        q.set(\"code\", \"http://loinc.org|55284-4\");\n        q.set(\"subject\", client.patient.id);\n        client\n            .request(`Observation?${q}`, {\n                pageLimit: 0,\n                flat: true\n            })\n            .then(bp => {\n                const bpMap = {\n                    systolic: [],\n                    diastolic: []\n                };\n                bp.forEach(o => {\n                    o.component.forEach(c => {\n                        const code = client.getPath(c, \"code.coding.0.code\");\n                        if (code === \"8480-6\") {\n                            bpMap.systolic.push({\n                                x: new Date(o.effectiveDateTime),\n                                y: c.valueQuantity.value\n                            });\n                        } else if (code === \"8462-4\") {\n                            bpMap.diastolic.push({\n                                x: new Date(o.effectiveDateTime),\n                                y: c.valueQuantity.value\n                            });\n                        }\n                    });\n                });\n                bpMap.systolic.sort((a, b) => a.x - b.x);\n                bpMap.diastolic.sort((a, b) => a.x - b.x);\n                this.renderChart(bpMap);\n            });\n    }\n    renderChart({ systolic, diastolic }) {\n        this.chart = new ChartJS(\"myChart\", {\n            type: \"line\",\n            data: {\n                datasets: [\n                    {\n                        label: \"Systolic\",\n                        data: systolic,\n                        borderWidth: 2,\n                        borderColor: \"rgba(200, 0, 127, 1)\",\n                        fill: false,\n                        cubicInterpolationMode: \"monotone\"\n                    },\n                    {\n                        label: \"Diastolic\",\n                        data: diastolic,\n                        borderWidth: 2,\n                        borderColor: \"rgba(0, 127, 255, 1)\",\n                        fill: false,\n                        cubicInterpolationMode: \"monotone\"\n                    }\n                ]\n            },\n\n            options: {\n                responsive: false,\n                scales: {\n                    yAxes: [\n                        {\n                            offset: true,\n                            ticks: {\n                                beginAtZero: true,\n                                min: 0,\n                                max: 200,\n                                stepSize: 20\n                            }\n                        }\n                    ],\n                    xAxes: [\n                        {\n                            type: \"time\"\n                        }\n                    ]\n                },\n                title: {\n                    text: \"Blood Preasure\",\n                    display: true,\n                    fontSize: 20\n                }\n            }\n        });\n    }\n    shouldComponentUpdate() {\n        return false;\n    }\n    componentWillUnmount() {\n        this.chart && this.chart.destroy();\n    }\n    componentDidMount() {\n        this.loadData();\n    }\n    render() {\n        return <canvas id=\"myChart\" width=\"600\" height=\"400\" />;\n    }\n}\n","import React from \"react\";\nimport { FhirClientContext } from \"../FhirClientContext\";\n\nfunction PatientName({ name = [] }) {\n    let entry =\n        name.find(nameRecord => nameRecord.use === \"official\") || name[0];\n    if (!entry) {\n        return <h1>No Name</h1>;\n    }\n    return <h1>{entry.given.join(\" \") + \" \" + entry.family}</h1>;\n}\n\nfunction PatientBanner(patient) {\n    return (\n        <div>\n            <PatientName name={patient.name} />\n            <span>\n                Gender: <b>{patient.gender}</b>,{\" \"}\n            </span>\n            <span>\n                DOB: <b>{patient.birthDate}</b>\n            </span>\n        </div>\n    );\n}\n\nexport default class Patient extends React.Component {\n    static contextType = FhirClientContext;\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            patient: null,\n            error: null\n        };\n    }\n    componentDidMount() {\n        const client = this.context.client;\n        this._loader = client.patient\n            .read()\n            .then(patient => {\n                this.setState({ patient, loading: false, error: null });\n            })\n            .catch(error => {\n                this.setState({ error, loading: false });\n            });\n    }\n    render() {\n        const { error, loading, patient } = this.state;\n        if (loading) {\n            return null;\n        }\n        if (error) {\n            return error.message;\n        }\n        return <PatientBanner {...patient} />;\n    }\n}\n","import React from \"react\";\nimport FhirClientProvider from \"./FhirClientProvider\";\nimport Chart from \"./Chart\";\nimport Patient from \"./Patient\";\n\n/**\n * Wraps everything into `FhirClientProvider` so that any component\n * can have access to the fhir client through the context.\n */\nexport default function Page() {\n    return (\n        <FhirClientProvider>\n            <Patient />\n            <hr />\n            <Chart />\n            <br />\n        </FhirClientProvider>\n    );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import React from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport Launcher from \"./Launcher\";\nimport Home from \"./Home\";\n\nexport default function App() {\n    return (\n        <BrowserRouter>\n            <Route path=\"/app\" component={Home} />\n            <Route path=\"/\" component={Launcher} exact />\n        </BrowserRouter>\n    );\n}\n"],"sourceRoot":""}